
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="An article comparing 17 different JavaScript based implementations of a simple Todo list app using the code complexity metrics: lines of code, cyclomatic complexity, Halstead measures and Maintainability Index.">

    <title>How Complex are TodoMVC Implementations | CoderStats Blog</title>

    <link rel="shortcut icon" href="http://blog.coderstats.net/ico/favicon.ico">
    <link rel="alternate" type="application/rss+xml" title="RSS feed" href="http://blog.coderstats.net/rss.xml">

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="http://blog.coderstats.net/css/style.css?v=3">

    

    
        <meta property="og:image" content="http://blog.coderstats.net/img/complexity/Mean-Cyclomatic-Complexity.png">
    

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">CoderStats Blog</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="http://coderstats.net/info/about/">About</a></li>
          </ul>
          <ul class="nav navbar-nav pull-right">
<li id="sharemenu" class="dropdown pull-right">
  <button type="button" class="dropdown-toggle btn btn-primary navbar-btn" data-toggle="dropdown"><i class="fa fa-share"></i></button>
  <ul class="share dropdown-menu">
    <li><a href="/rss.xml" class="btn btn-default"><i class="fa fa-rss"></i> RSS Feed</a></li>
    <li><a href="https://twitter.com/share?url=http%3A//blog.coderstats.net/todomvc-complexity/&text=How%20Complex%20are%20TodoMVC%20Implementations" class="btn btn-default"><i class="fa fa-twitter"></i> Twitter</a></li>
    <li><a href="http://www.facebook.com/sharer.php?u=http%3A//blog.coderstats.net/todomvc-complexity/&t=How%20Complex%20are%20TodoMVC%20Implementations" class="btn btn-default"><i class="fa fa-facebook"></i> Facebook</a></li>
    <li><a href="https://plus.google.com/share?url=http%3A//blog.coderstats.net/todomvc-complexity/" class="btn btn-default"><i class="fa fa-google-plus"></i> Google+</a></li>
    <li><a href="http://www.linkedin.com/shareArticle?mini=true&url=http%3A//blog.coderstats.net/todomvc-complexity/&title=How%20Complex%20are%20TodoMVC%20Implementations" class="btn btn-default"><i class="fa fa-linkedin"></i> LinkedIn</a></li>
    <li><a href="http://reddit.com/submit?url=http%3A//blog.coderstats.net/todomvc-complexity/&title=How%20Complex%20are%20TodoMVC%20Implementations" class="btn btn-default"><i class="fa fa-share"></i> Reddit</a></li>
    <li><a href="http://www.stumbleupon.com/submit?url=http%3A//blog.coderstats.net/todomvc-complexity/&title=How%20Complex%20are%20TodoMVC%20Implementations" class="btn btn-default"><i class="fa fa-share"></i> Stumble</a></li>
  </ul>
</li>
</ul>
        </div>
      </div>
    </div>

    
<div class="container">
  <div class="row">
    <div class="col-md-9">
        <h1>How Complex are TodoMVC Implementations</h1>
        <blockquote>
<p>Controlling complexity is the essence of computer programming.
- Brian Kernighan</p>
</blockquote>
<p>One promise application frameworks have in common is to reduce the amount of work necessary to get things done. Not having to re-invent the wheel for every new project and being able to rely on a library of functions that perform common tasks certainly has its benefits.</p>
<p>When doing Web or mobile development it is almost impossible these days not to consider working with a JavaScript framework or library. But there are plenty of them and a new one seems to pop up every day.</p>
<p>A good place to start looking for a framework/library is the <a href="http://todomvc.com/">TodoMVC project</a>, which is a collection of implementations of a simple Todo app. Each implementation either uses one of the more popular MVC frameworks (AngularJS, Ember.js, Backbone.js etc.), or a library (Closure, Dojo, jQuery) or no external dependencies like the Vanilla JS example.</p>
<p>I skimmed the source code of some of the Todo app implementations and thought about ways to measure them and make them comparable. One thing that immediately came to my mind was using <a href="http://cloc.sourceforge.net/">cloc</a> to count the lines of code, in the end I expect to write less code when using a framework. But this metric alone doesn't tell how complex the code is.</p>
<p>Fortunately, there is <a href="https://github.com/philbooth/complexityReport.js">complexityReport.js</a>, a tool for reporting code complexity metrics in JavaScript projects, which currently reports on: lines of code, number of parameters, cyclomatic complexity, Halstead metrics, and Maintainability Index. I used this tool to create complexity reports for the TodoMVC implementations, aggregated the numbers on a per project bases and created bar graphs for easier comparison of the example apps.</p>
<h2>Complexity of Todo App Implementations</h2>
<p>Below you find information on the different metrics that were calculated and the graphs comparing the different projects. Only JavaScript source files are considered in these numbers and external libraries were excluded. The gwt and dart examples were completely omitted as they are not written in JavaScript.</p>
<h3>Source Lines of Code (SLOC)</h3>
<p>This metric is divided into physical (actual lines) and logical (imperative statements) counts. Both are not very informative regarding complexity, but I still think the logical lines of code is an interesting metric to look at.</p>
<ul class="nav nav-tabs">
  <li class="active"><a href="#logical">SLOC Logical</a></li>
  <li><a href="#physical">SLOC Physical</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane fade in active" id="logical">
    <img src="/img/complexity/Sum-Logical-SLOC.png" alt="Sum Logical SLOC" class="img-responsive">
  </div>
  <div class="tab-pane fade" id="physical">
    <img src="/img/complexity/Sum-Physical-SLOC.png" alt="Sum Physical SLOC" class="img-responsive">
  </div>
  <hr>
</div>

<p>The logical lines of code range from 75 for AngularJS to 366 for Dojo. Quite a difference and quite impressive how few lines of code you need with some of the frameworks. Interestingly, the Vanilla JS implementation was written in less lines of code than the Dojo, Flight, and Closure examples. Considering that laziness is a virtue for programmers AngularJS certainly looks more attractive than Dojo here.</p>
<h3>Cyclomatic complexity</h3>
<p>The Cyclomatic complexity is a metric developed by Thomas J. McCabe in 1976. It measures the complexity of a program by counting the number of linearly independent paths through a program's source code. The lower the cyclomatic complexity the better. McCabe suggested that programmers should split a software module into smaller parts whenever the cyclomatic complexity of the module exceeded 10. You can read the <a href="http://www.literateprogramming.com/mccabe.pdf">original paper here</a>.</p>
<p><img src="/img/complexity/Mean-Cyclomatic-Complexity.png" alt="Mean Cyclomatic Complexity" class="img-responsive"></p>
<p>The mean cyclomatic complexity was calculated by dividing the sum of the aggregate complexity values for all files (modules) by the number of files.</p>
<p>jQuery stands out here. One factor being that the whole app is written in a <a href="https://github.com/tastejs/todomvc/blob/gh-pages/architecture-examples/jquery/js/app.js">single file</a> with the outer anonymous function having a cyclomatic complexity of 183. KnockoutJS, however, is also a single-file implementation and has a much lower value.</p>
<p>Besides jQuery, Agility.js exceeds the threshold of 10, all others fall below it with Ember.js scoring best with just 2.</p>
<h3>Halstead complexity measures</h3>
<p>These measures introduced by Maurice Howard Halstead in 1977 are based on the number of distinct operators (<code>n1</code>), the number of distinct operands (<code>n2</code>), the total number of operators (<code>N1</code>) and the total number of operands (<code>N2</code>) in each function of a program module.</p>
<p>What you see in the graphs below are the totals aggregated from all JavaScript files per example application. For all of these Halstead measures lower values are better.</p>
<ul class="nav nav-tabs">
  <li class="active"><a href="#volume">Volume</a></li>
  <li><a href="#difficulty">Difficulty</a></li>
  <li><a href="#effort">Effort</a></li>
  <li><a href="#time">Time</a></li>
  <li><a href="#bugs">Bugs</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane fade in active" id="volume">
    <img src="/img/complexity/Sum-Halstead-Volume.png" alt="Sum Halstead Volume" class="img-responsive">
    <p>The program volume (V) measures the information contents of the program in mathematical bits.<br>
    Formula: <code>V = (N1 + N2) * log2(n1 + n2)</code></p>
  </div>
  <div class="tab-pane fade" id="difficulty">
    <img src="/img/complexity/Sum-Halstead-Difficulty.png" alt="Sum Halstead Difficulty" class="img-responsive">
    <p>The difficulty or error proneness (D) is proportional to the number of unique operators and to the ratio of total number of operands and the number of unique operands. So using the same operands frequently throughout a program makes it more prone to errors.<br>
    Formula: <code>D = (n1 / 2) * (N2 / n2)</code></p>
  </div>
   <div class="tab-pane fade" id="effort">
    <img src="/img/complexity/Sum-Halstead-Effort.png" alt="Sum Halstead Effort" class="img-responsive">
    <p>The effort (E) to implement or understand a program is the product of its volume and difficulty.<br>
    Formula: <code>E = V * D</code></p>
  </div>
   <div class="tab-pane fade" id="time">
    <img src="/img/complexity/Sum-Halstead-Time.png" alt="Sum Halstead Time" class="img-responsive">
    <p>The time to implement or understand a program (T) is proportional to the effort. Halstead found by experimentation that dividing the effort by 18 gives an approximation for the time in seconds.<br>
    Formula: <code>T = E / 18</code></p>
  </div>
   <div class="tab-pane fade" id="bugs">
    <img src="/img/complexity/Sum-Halstead-Bugs.png" alt="Sum Halstead Bugs" class="img-responsive">
    <p>This measure is an estimate of the number of delivered bugs (B). It correlates with the overall complexity of the program.<br>
    Formula: <code>B = (E**(2 / 3)) / 3000</code></p>
  </div>
  <hr>
</div>

<p>The differences between lower and higher values are quite dramatic for all of these Halstead measures. Picking the time for example the Ember.js implementation would take roughly 40 minutes and the Vanilla JS implementation about 8 hours, provided you have a similar level of experience. These values don't seem too far off when looking at the actual code.</p>
<h3>Maintainability Index</h3>
<p>The Maintainability Index takes into account 3 of the metrics we saw before and combines them into one formula:
<code>MI = 171 - (3.42 * ln(mean effort)) - (0.23 * ln(mean cyclomatic complexity)) - (16.2 * ln(mean logical SLOC))</code></p>
<p>This metric was designed in 1991 by Paul Oman and Jack Hagemeister. Its values range from negative infinity up to 171 on a logarithmic scale. Higher values indicate better maintainability. Oman and Hagemeister identified 65 as the threshold value below which a program is considered difficult to maintain.</p>
<p>The mean Maintainability Index was calculated by dividing the sum of Maintainability Index values across all files of a project by the number of files.</p>
<p><img src="/img/complexity/Mean-Maintainability-Index.png" alt="Mean Maintainability Index" class="img-responsive"></p>
<p>The Todo app is conceptually fairly simple and all of its implementations are rather small code projects so none of them falls below the threshold proposed by Oman and Hagemeister. Unsurprisingly, those Todo app implementations that scored well before (mostly on the lower end) are also more maintainable according to this metric.</p>
<h2>Domination Ranking</h2>
<p>This section was added 3 days after the 1st publication.</p>
<p>There was some discussion on Reddit about this post and <a href="http://www.reddit.com/user/jpfed">Redditor jpfed</a>
calculated a <a href="http://www.reddit.com/r/javascript/comments/1mldhu/how_complex_are_todomvc_implementations/ccc0vmh">domination ranking</a>
based on the scores across all metrics.</p>
<p>In his formula he compared each pair of implementations (X, Y) saying that
implementation X is dominated by implementation Y, if Y scores better than X
on all metrics.</p>
<p>In other words the less often an implementation is dominated the better, which
makes AngularJS, AngularJS-perf, Ember.js and KnockoutJS look pretty good.</p>
<p><img src="/img/complexity/Times-Dominated.png" alt="Times Dominated" class="img-responsive"></p>
<h2>Summary</h2>
<p>In this article I compared 17 different JavaScript based implementations of a simple Todo list app using the metrics: lines of code, cyclomatic complexity, Halstead measures and Maintainability Index. Overall AngularJS and Ember.js scored pretty well. Dojo, Closure and Vanilla JS on the other end require more programming and maintainance effort.</p>
<p>As mentioned earlier the Todo list app is rather simple and all of the projects are fairly small in size. It would be interesting to compare a more complex type of application using these measures to see whether the different approaches would score similarly to the results presented here.</p>
<p>So without generalizing what these numbers say, they help me narrow down the potential choices in the ever-growing jungle of JavaScript MVC frameworks and libraries.</p>
<h2>References</h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Cyclomatic_complexity">Cyclomatic complexity</a></li>
<li><a href="http://www.verifysoft.com/en_halstead_metrics.html">Halstead Metrics</a></li>
<li><a href="http://jscomplexity.org/">JScomplexity.org</a></li>
<li><a href="http://todomvc.com/">TodoMVC</a></li>
<li><a href="https://github.com/coderstats/todomvc-metrics">Source code and data for this post</a></li>
</ul>
        
<hr>
<div class="postinfo">
<p>This post was written by <a href="http://coderstats.net/github/yaph/">Ramiro Gómez</a> and published on September 17, 2013.</p>
<p>Subscribe to <a href="/rss.xml">news feed</a> or follow <a href="https://twitter.com/coderstats">@coderstats on Twitter</a> to not miss the next post.</p>
</div>
<hr>

        
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'coderstats';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

    </div>
    <div class="col-md-3">
        <h3>Get CoderStats</h3>
<form role="form" id="coderstats" class="well">
  <div class="input-group">
    <div class="input-group">
      <span class="input-group-addon"><i class="fa fa-bar-chart-o"></i></span>
      <input class="form-control" id="id_username" placeholder="Enter GitHub user name" type="text">
    </div>
    <button class="voffset btn btn-default" type="submit">Get Stats</button>
  </div>
</form>
<h3>Funny Shirts for Coders</h3>
<div>
<a rel="nofollow" href="https://www.sunfrog.com/110641636-326841010.html?87260&collectionCrossSell=64247"><img src="https://images.sunfrogshirts.com/2016/12/20/m_87260-1482247968684-Gildan-Men-Royal-Blue-_w92_-front.jpg" alt="Shrug it works on my machine - Programmer Excuse Design" class="img-responsive img-thumbnail"/><br>It works on my machine</a></div>
<div class="voffset">
<a rel="nofollow" href="https://www.sunfrog.com/110438766-320856993.html?87260&collectionCrossSell=64247"><img src="https://images.sunfrogshirts.com/2016/12/14/m_87260-1481747039695-Gildan-Men-Black-_w91_-front.jpg" alt="Bash Fork Bomb - White Text for Unix/Linux Hackers" class="img-responsive img-thumbnail"/><br>Bash Fork Bomb Command</a></div>
<p class="small right">- Advertisement -</p>
<hr class="clearfix">

  <h3>Source Code</h3>
  <p>Check out the source code used to process and render the data.</p>
  <a class="btn btn-primary" href="https://github.com/coderstats/todomvc-metrics"><i class="fa fa-github"></i> Code Repository</a>
  <hr>

<div class="btn-group">
  <a class="btn btn-warning" href="/rss.xml"><i class="fa fa-rss"></i> Newsfeed</a>
  <a class="btn btn-info" href="https://twitter.com/coderstats"><i class="fa fa-twitter"></i> Twitter</a>
</div>
    </div>
  </div>
</div>

    <div class="container">
      <hr>
      <footer>
        <p>© <script>document.write(new Date().getFullYear())</script> <a href="http://coderstats.net/">CoderStats.net</a></p>
      </footer>
    </div>
    <script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="http://blog.coderstats.net/js/script.js?v=3"></script>

    
        
            <script src="/js/todomvc.js?v=3"></script>
        
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-5102014-14', 'coderstats.net');
  ga('send', 'pageview');
  (function(c,a){function d(){var e=a.getElementsByTagName("a");var f=[];for(var g=0;g<e.length;++g){var h=e[g];if(h.host!=c.location.host){f.push(h)}}return f}function b(f){var e=f.srcElement||f.target;while(e&&(typeof e.tagName=="undefined"||e.tagName.toLowerCase()!="a"||!e.href)){e=e.parentNode}if(!e||!e.href){return}if(c.ga){ga("send","event","Outbound link","Click",e.href)}if(!e.target||e.target.match(/^_(self|parent|top)$/i)){setTimeout(function(){a.location.href=e.href},150);if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}}}c.addEventListener("load",function(){var e=d();for(var f in e){e[f].addEventListener("click",b)}})}(window,document));
</script>
  </body>
</html>